replicaCount: 1

image:
  repository: ghcr.io/christian-deleon/netbird-coredns
  tag: v0.2.0
  pullPolicy: IfNotPresent

imagePullSecrets: []

nameOverride: ""
fullnameOverride: ""

podAnnotations: {}

podSecurityContext: {}

securityContext:
  capabilities:
    add:
      - NET_ADMIN

resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}

persistence:
  # storageClass: "" # Leave empty to use the default storage class
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 1Gi

config:
  domains: "mydomain.com"
  forwardTo: "8.8.8.8"
  dnsPort: 5053
  apiPort: 8080
  refreshInterval: 15
  recordsFile: "/etc/nb-dns/records/records.json"
  logLevel: "info"
  # managementURL: "https://netbird.mydomain.com" # Default: https://api.netbird.io (official service), set for self-hosted
  hostname: "nb-dns" # Hostname for NetBird peer registration
  dnsLabels: "nb-dns" # DNS labels for service discovery (comma-separated)
  setupKey:
    # REQUIRED: NetBird setup key for peer registration
    # Option 1: Set directly via value (will create a Kubernetes secret automatically)
    # value: "your-setup-key-here"
    # Option 2: Reference from an existing secret
    # secret:
    #   name: "netbird-setup-key"
    #   key: "setup-key"

probes:
  liveness:
    enabled: true
    path: /health
    initialDelaySeconds: 60
    periodSeconds: 30
    timeoutSeconds: 10
    failureThreshold: 3
  readiness:
    enabled: true
    path: /health
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
